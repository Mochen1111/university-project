<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人中心</title>

    <link th:href="@{/css/bootstrap.css}" rel="stylesheet"></link>
    <script src="/js/bootstrap.min.js" type="application/javascript"></script>
    <script src="/js/jquery-3.5.1.js" type="application/javascript"></script>
</head>
<body>
<!-- 前台导航栏-->
<div class="shadow-sm mb-5 rounded ">
    <nav class="navbar navbar-light nav-color">
        <div class="container-fluid" >
            <a class="navbar-brand" href="/index.html">
                古诗文鉴赏平台
            </a>
            <a class="nav-link active" href="/index.html">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207l-5-5-5 5V13.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7.207Z"/>
                </svg>
                返回主页
            </a>
            <a class="nav-link active" href="/userCenter">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                </svg>
                个人中心
            </a>
            <a class="nav-link active" href="/userCollection">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
                我的收藏夹
            </a>
            <a class="nav-link active" href="/userAuthor">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-list" viewBox="0 0 16 16">
                    <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                    <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                </svg>
                著名诗人
            </a>
            <a class="nav-link active" href="/share">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
                    <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                </svg>
                鉴赏讨论
            </a>
            <a class="nav-link active" href="/sentence">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-list" viewBox="0 0 16 16">
                    <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                    <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                </svg>
                名句摘录
            </a>
            <a class="nav-link active" href="/logout">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
                    <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
                </svg>
                退出登录
            </a>
        </div>
    </nav>
</div>

<!-- 提示框 -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">提示信息</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" th:text="${message}"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- 信息展示-->
<div style="margin-left: 10%;margin-right: 10%">
    <div class="row g-3">
        <div class="col-12">
            <div class="card p-3 mb-5 border bg-white">
                <div class=" card-body">
                    <h5 class="card-title" style="text-align: center">个人信息</h5>
                    <hr>
                    <div style="text-align: center" class="card-text">
                        <div class="row g-2 mb-2">
                            <div class="col-4">
                                用户名
                            </div>
                            <div class="col-4">
                                联系电话
                            </div>
                            <div class="col-4">
                                电子邮箱
                            </div>
                            <div class="col-4" th:text="${user.userName}"></div>
                            <div class="col-4" th:text="${user.userPhone}"></div>
                            <div class="col-4" th:text="${user.userEmail}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-8"></div>

        <div class="col-4">
            <div class="card p-3 mb-5 border bg-white">
                <form class="row g-3" method="post" th:action="@{/userUpdate}" id="myForm" onsubmit="return check(this)" style="text-align: center">
                    <div class="col-12">
                        <h4 class="card-title">修改个人信息</h4>
                    </div>
                    <div class="col-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1">密 码</span>
                            <input type="password" class="form-control" id="InputPassword" name="userPassword" required>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon2">确认密码</span>
                            <input type="password" class="form-control" id="InputPassword2" required >
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon3">手机号</span>
                            <input type="text" class="form-control" id="InputPhone" name="userPhone" required>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon4">邮 箱</span>
                            <input type="email" class="form-control" id="InputEmail" name="UserEmail" required>
                        </div>
                    </div>
                    <div id="tips" class="form-text col-12 mb-3">请再次输入密码</div>
                    <div class="col-6">
                        <button class="btn btn-outline-primary" type="submit" id="myRegister">确认修改</button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-outline-primary" type="reset" >重置表单</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

</body>
</html>
<script th:inline="javascript">
    $(document).ready(function (){
        var mod = [[${flag}]];
        if (mod === true){
            $("#myModal").modal("show");
        }
    })
    $(document).ready(function (){
        $("#myForm").on("input",function (){
            var psw1 = $("#InputPassword").val();
            var psw2 = $("#InputPassword2").val();
            if (psw1 !== psw2){
                $("#tips").text("请检查两次输入的密码是否相同");
            }else if ($.isEmptyObject(psw1) && $.isEmptyObject(psw2)){
                $("#tips").text("请保证正确输入了密码");
            }else {
                $("#tips").text("密码格式正确");
            }
        })
    })
    function check(obj){
        if (obj.password !== "") {
            var psw1 = $("#InputPassword").val();
            var psw2 = $("#InputPassword2").val();
            if (psw1 === psw2){
                return true;
            }else {
                alert("请检查两次密码是否相同");
                return false;
            }
        } else {
            return false;
        }
    }
</script>
<style>
    body{
        background-color: #CFCDB7;
        background-image: url("/img/820.jpg");
        background-size: cover;
        background-attachment: fixed;
    }
    .nav-color{
        background-color: #FAECDB;
    }
</style>